"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[747],{747:(te,K,v)=>{v.r(K),v.d(K,{LoginPageModule:()=>re});var I=v(6895),M=v(433),y=v(8058),S=v(1407),L=v(655),c=v(8259),B=v(5226),w=v.n(B),i=v(8256),C=v(1585),Z=v(849),O=v(529),z=v(9751),N=v(4968),F={error:"cordova_not_available"},D={error:"plugin_not_installed"};function P(n){if(typeof window<"u"&&window.angular){var r=window.document,t=window.angular.element(r.querySelector("[ng-app]")||r.body).injector();if(t)return t.get("$q")(function(a,u){n(a,u)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(a,u){n(a,u)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function A(n,e,r){var t,o,a;return"string"==typeof n?t=n:(t=n.constructor.getPluginRef(),r=n.constructor.getPluginName(),a=n.constructor.getPluginInstallName()),!(!(o=x(t))||e&&typeof o[e]>"u")||(typeof window>"u"||!window.cordova?(function G(n,e){typeof process>"u"&&console.warn(e?"Native: tried calling "+n+"."+e+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator":"Native: tried accessing the "+n+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator")}(r,e),F):(function V(n,e,r){console.warn(r?"Native: tried calling "+n+"."+r+", but the "+n+" plugin is not installed.":"Native: tried accessing the "+n+" plugin but it's not installed."),e&&console.warn("Install the "+n+" plugin: 'ionic cordova plugin add "+e+"'")}(r,a,e),D))}function b(n,e,r,t,o,a){void 0===t&&(t={}),r=function k(n,e,r,t){if(void 0===e&&(e={}),e.sync)return n;if("reverse"===e.callbackOrder)n.unshift(t),n.unshift(r);else if("node"===e.callbackStyle)n.push(function(f,d){f?t(f):r(d)});else if("object"===e.callbackStyle&&e.successName&&e.errorName){var o={};o[e.successName]=r,o[e.errorName]=t,n.push(o)}else if(typeof e.successIndex<"u"||typeof e.errorIndex<"u"){var a=function(){e.successIndex>n.length?n[e.successIndex]=r:n.splice(e.successIndex,0,r)},u=function(){e.errorIndex>n.length?n[e.errorIndex]=t:n.splice(e.errorIndex,0,t)};e.successIndex>e.errorIndex?(u(),a()):(a(),u())}else n.push(r),n.push(t);return n}(r,t,o,a);var u=A(n,e);if(!0===u){var f=x(n.constructor.getPluginRef());return f[e].apply(f,r)}return u}function x(n){return typeof window<"u"?R(window,n):null}function R(n,e){for(var r=e.split("."),t=n,o=0;o<r.length;o++){if(!t)return null;t=t[r[o]]}return t}var Q=function(n,e,r){return void 0===r&&(r={}),function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return r.sync?b(n,e,t,r):r.observable?function H(n,e,r,t){return void 0===t&&(t={}),new z.y(function(o){var a;return a=t.destruct?b(n,e,r,t,function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return o.next(u)},function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return o.error(u)}):b(n,e,r,t,o.next.bind(o),o.error.bind(o)),a&&a.error&&(o.error(a.error),o.complete()),function(){try{if(t.clearFunction)return t.clearWithArgs?b(n,t.clearFunction,r,t,o.next.bind(o),o.error.bind(o)):b(n,t.clearFunction,[])}catch(u){console.warn("Unable to clear the previous observable watch for",n.constructor.getPluginName(),e),console.warn(u)}}})}(n,e,t,r):r.eventObservable&&r.event?function J(n,e){return e=typeof window<"u"&&e?R(window,e):e||(typeof window<"u"?window:{}),(0,N.R)(e,n)}(r.event,r.element):r.otherPromise?function E(n,e,r,t){return void 0===t&&(t={}),P(function(o,a){var u=b(n,e,r,t);u?u.error?a(u.error):u.then&&u.then(o).catch(a):a({error:"unexpected_error"})})}(n,e,t,r):function W(n,e,r,t){void 0===t&&(t={});var o,a,u=P(function(f,d){o=t.destruct?b(n,e,r,t,function(){for(var g=[],s=0;s<arguments.length;s++)g[s]=arguments[s];return f(g)},function(){for(var g=[],s=0;s<arguments.length;s++)g[s]=arguments[s];return d(g)}):b(n,e,r,t,f,d),a=d});return o&&o.error&&(u.catch(function(){}),"function"==typeof a&&a(o.error)),u}(n,e,t,r)}},$=function(){function n(){}return n.installed=function(){return!0===A(this.pluginRef)},n.getPlugin=function(){return typeof window<"u"?function X(n,e){for(var r=e.split("."),t=n,o=0;o<r.length;o++){if(!t)return null;t=t[r[o]]}return t}(window,this.pluginRef):null},n.getPluginName=function(){return this.pluginName},n.getPluginRef=function(){return this.pluginRef},n.getPluginInstallName=function(){return this.plugin},n.getSupportedPlatforms=function(){return this.platforms},n.pluginName="",n.pluginRef="",n.plugin="",n.repo="",n.platforms=[],n.install="",n}();function h(n,e,r,t){return Q(n,e,r).apply(this,t)}!function U(){if(typeof process>"u"){var n=typeof window<"u"?window:{},r=Date.now(),t=!1;n.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-r)+" ms"),t=!0}),setTimeout(function(){!t&&n.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}();var T=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return(0,L.ZT)(e,n),e.prototype.hideFormAccessoryBar=function(r){return h(this,"hideFormAccessoryBar",{sync:!0,platforms:["iOS"]},arguments)},e.prototype.hide=function(){return h(this,"hide",{sync:!0,platforms:["iOS","Android"]},arguments)},e.prototype.show=function(){return h(this,"show",{sync:!0,platforms:["Android"]},arguments)},e.prototype.setResizeMode=function(r){return h(this,"setResizeMode",{sync:!0,platforms:["iOS"]},arguments)},e.prototype.setKeyboardStyle=function(r){return h(this,"setKeyboardStyle",{sync:!0,platforms:["iOS"]},arguments)},e.prototype.disableScroll=function(r){return h(this,"disableScroll",{sync:!0,platforms:["iOS"]},arguments)},e.prototype.onKeyboardShow=function(){return h(this,"onKeyboardShow",{eventObservable:!0,event:"native.keyboardshow",platforms:["iOS","Android"]},arguments)},e.prototype.onKeyboardWillShow=function(){return h(this,"onKeyboardWillShow",{eventObservable:!0,event:"keyboardWillShow",platforms:["iOS","Android"]},arguments)},e.prototype.onKeyboardDidShow=function(){return h(this,"onKeyboardDidShow",{eventObservable:!0,event:"keyboardDidShow",platforms:["iOS","Android"]},arguments)},e.prototype.onKeyboardHide=function(){return h(this,"onKeyboardHide",{eventObservable:!0,event:"native.keyboardhide",platforms:["iOS","Android"]},arguments)},e.prototype.onKeyboardWillHide=function(){return h(this,"onKeyboardWillHide",{eventObservable:!0,event:"keyboardWillHide",platforms:["iOS","Android"]},arguments)},e.prototype.onKeyboardDidHide=function(){return h(this,"onKeyboardDidHide",{eventObservable:!0,event:"keyboardDidHide",platforms:["iOS","Android"]},arguments)},Object.defineProperty(e.prototype,"isVisible",{get:function(){return function j(n,e){return!0===A(n,e)?x(n.constructor.getPluginRef())[e]:null}(this,"isVisible")},set:function(r){!function _(n,e,r){!0===A(n,e)&&(x(n.constructor.getPluginRef())[e]=r)}(this,"isVisible",r)},enumerable:!1,configurable:!0}),e.pluginName="Keyboard",e.plugin="cordova-plugin-ionic-keyboard",e.pluginRef="window.Keyboard",e.repo="https://github.com/ionic-team/cordova-plugin-ionic-keyboard",e.platforms=["Android","iOS"],e.\u0275fac=function(){var r;return function(o){return(r||(r=i.n5z(e)))(o||e)}}(),e.\u0275prov=i.Yz7({token:e,factory:function(r){return e.\u0275fac(r)}}),e}($);const ee=[{path:"",component:(()=>{class n{constructor(r,t,o,a,u){this.Link=r,this.router=t,this.storage=o,this.http=a,this.keyboard=u,this.BaseUrl=this.Link.BaseLink(),this.visible=!0,this.changetype=!0,c("#menuId").attr("disabled","disabled")}onEnterKey(r){this.Login()}viewpass(){this.visible=!this.visible,this.changetype=!this.changetype}Login(){c("#Preloader").show(),c("#SaveButtonHome").attr("disabled","disabled"),c("#menuId").removeAttr("disabled");var r=c("#UserName").val(),t=c("#Password").val();""!=r&&""!=t?c.ajax({url:this.BaseUrl+"login/singin",type:"POST",dataType:"text",data:{login:r,pass:t,type:"m"},crossDomain:!0,async:!0,success:o=>{switch(c("#Preloader").hide(),c("#ButtonLogin").removeAttr("disabled"),JSON.parse(o)){case"OK-":c.ajax({url:"https://backup.tregional.mx/AbetCloud/models/queries/app/identify.php",type:"POST",dataType:"text",data:{login:r,pass:t},crossDomain:!0,async:!1,success:u=>{console.log(u),this.storage.set("id",u),this.permisos(u),this.acceso(u)}}),c("#Preloader").hide(),c("#ButtonLogin").removeAttr("disabled"),this.storage.set("login",r),this.storage.set("pass",t),this.storage.get("login"),this.router.navigate(["/seleccion"]),c("#UserName").val(""),c("#Password").val("");break;case"IUOP":c("#Preloader").hide(),c("#ButtonLogin").removeAttr("disabled"),w().fire({title:"Error",icon:"error",text:"Incorrect user or password",heightAuto:!1});break;case"UWOA":c("#Preloader").hide(),c("#ButtonLogin").removeAttr("disabled"),w().fire({title:"Error",icon:"error",text:"User without acess",heightAuto:!1});break;case"UWAS":c("#Preloader").hide(),c("#ButtonLogin").removeAttr("disabled"),w().fire({title:"Error",icon:"error",text:"User with active session",heightAuto:!1})}},error:function(o,a,u){"timeout"==o.statusText?w().fire({title:"Error",text:"Your device is not connected to internet or your connection is very slow.\n Please try again",icon:"error",heightAuto:!1,allowOutsideClick:!1,showCancelButton:!1,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",cancelButtonText:"No, Cancelar"}).then(f=>{}):w().fire({title:"Error",icon:"error",text:"An internal server error has occurred please contact the site admin",heightAuto:!1}),c("#Preloader").hide(),c("#ButtonLogin").removeAttr("disabled")}}):(c("#Preloader").hide(),c("#ButtonLogin").removeAttr("disabled"),w().fire({title:"Warning",icon:"error",text:"Information incomplete",heightAuto:!1}))}permisos(r){console.log(r),this.http.get("https://backup.tregional.mx/AbetCloud/models/queries/app/C_getPrivilege.php?id="+r).subscribe(t=>{console.log(t),this.storage.set("p",t)})}acceso(r){console.log(r),this.http.get("https://backup.tregional.mx/AbetCloud/models/queries/app/C_getAccess.php?id="+r).subscribe(t=>{console.log(t),this.storage.set("a",t)})}ngOnInit(){return(0,L.mG)(this,void 0,void 0,function*(){yield this.storage.create()})}}return n.\u0275fac=function(r){return new(r||n)(i.Y36(C.y),i.Y36(S.F0),i.Y36(Z.K),i.Y36(O.eN),i.Y36(T))},n.\u0275cmp=i.Xpm({type:n,selectors:[["app-login"]],decls:30,vars:2,consts:[["color","Tertiary",1,"ion-padding","ion-text-center",3,"fullscreen"],["align","center"],["src","../assets/icon/logo.png","width","250px","height","100px"],["name","person-outline"],["placeholder","Usuario","id","UserName","color","primary",3,"keyup.enter"],["name","lock-closed-outline"],["placeholder","Contrase\xf1a","id","Password",3,"type","keyup.enter"],["name","eye",3,"click"],["shape","round","id","Preloader","align","center",2,"display","none"],["src","../assets/icon/rncpre2.0.gif","alt","validando..."],["shape","round","fill","outline","expand","block","id","ButtonLogin",3,"click"],[1,"ion-no-border"]],template:function(r,t){1&r&&(i._UZ(0,"br")(1,"br")(2,"br"),i.TgZ(3,"ion-content",0),i._UZ(4,"br")(5,"br")(6,"br"),i.TgZ(7,"div",1),i._UZ(8,"img",2),i.qZA(),i._UZ(9,"br")(10,"br")(11,"br"),i.TgZ(12,"ion-item"),i._UZ(13,"ion-icon",3),i.TgZ(14,"ion-input",4),i.NdJ("keyup.enter",function(a){return t.onEnterKey(a)}),i.qZA()(),i.TgZ(15,"ion-item"),i._UZ(16,"ion-icon",5),i.TgZ(17,"ion-input",6),i.NdJ("keyup.enter",function(a){return t.onEnterKey(a)}),i.qZA(),i.TgZ(18,"ion-icon",7),i.NdJ("click",function(){return t.viewpass()}),i.qZA()(),i.TgZ(19,"div",8),i._UZ(20,"img",9),i.qZA(),i._UZ(21,"br"),i.TgZ(22,"div")(23,"ion-button",10),i.NdJ("click",function(){return t.Login()}),i._uU(24,"Login"),i.qZA()()(),i.TgZ(25,"ion-footer",11)(26,"ion-toolbar")(27,"ion-text")(28,"p"),i._uU(29,"Versi\xf3n 1.1.2"),i.qZA()()()()),2&r&&(i.xp6(3),i.Q6J("fullscreen",!0),i.xp6(14),i.Q6J("type",t.changetype?"password":"text"))},dependencies:[y.YG,y.W2,y.fr,y.gu,y.pK,y.Ie,y.yW,y.sr,y.j9],styles:["ion-item[_ngcontent-%COMP%]{padding-right:5%;padding-top:30px;color:#d75928;--border-color: #d75928;font-size:18px;--highlight-color-focused: #274662}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#061fff}ion-button[_ngcontent-%COMP%]{margin-top:20px;--background: #274662;--background-activated: #ffffff;color:#fff}.wrapform[_ngcontent-%COMP%]{margin-top:10px}ion-text[_ngcontent-%COMP%]{font-size:10px;text-align:center}ion-footer[_ngcontent-%COMP%]{position:absolute}.password[_ngcontent-%COMP%]{position:relative;width:250px}"]}),n})()}];let ne=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({imports:[S.Bz.forChild(ee),S.Bz]}),n})(),re=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=i.oAB({type:n}),n.\u0275inj=i.cJS({providers:[T],imports:[I.ez,M.u5,y.Pc,ne]}),n})()}}]);