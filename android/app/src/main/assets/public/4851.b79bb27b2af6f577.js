"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4851],{4851:(U,_,r)=>{r.r(_),r.d(_,{HomePageModule:()=>F});var z=r(6895),p=r(8058),A=r(433),y=r(1407),m=r(655),S=r(8259),e=r(8256),N=r(529),J=r(849),I=r(7977),T=r(4560),H=r(2358),M=r(4033),k=r(436);const G=[{path:"",component:(()=>{class n{constructor(o,a,i,t,l,s){this.http=o,this.storage=a,this.router=i,this.streamingMedia=t,this.navCtrl=l,this.platform=s,this.selectTabs="Detecciones",this.locations=[],this.canales=[],this.spots=[],this.library=[],this.canalesS=[],this.backbutton()}getInputValue(o){console.log(o)}backbutton(){this.platform.backButton.subscribeWithPriority(9999,()=>{document.addEventListener("backbutton",function(o){o.preventDefault(),o.stopPropagation(),console.log("back button pressed")},!1)})}loadLibrary(){return(0,m.mG)(this,void 0,void 0,function*(){let o=yield this.storage.get("id");this.http.get("https://backup.tregional.mx/AbetCloud/models/queries/app/C_getLibraries.php?id="+o).subscribe(a=>{this.library=a,console.log(this.library)})})}loadLocations(){return(0,m.mG)(this,void 0,void 0,function*(){let o=yield this.storage.get("id"),a=yield this.storage.get("library");console.log(a);let i=yield this.storage.get("plaza");null==i&&(i=[]),this.http.get("https://backup.tregional.mx/AbetCloud/models/queries/app/C_getPlazas_source.php?id="+o+"&source="+a[0].Privilege).subscribe(t=>{this.locations=t,console.log(this.locations);let l=t;for(var s=0;s<l.length;s++)for(var c=0;c<i.length;c++)i[c].PlazaID==l[s].PlazaID&&(l[s].selected=!0)})})}loadCanales(){return(0,m.mG)(this,void 0,void 0,function*(){let o=yield this.storage.get("id"),a=yield this.storage.get("plaza"),i="",t=yield this.storage.get("canal"),l=yield this.storage.get("library");null==t&&(t=[]);for(let s=0;s<a.length;s++)i=i+","+a[s].PlazaID;i=i.slice(1),this.http.get("https://backup.tregional.mx/AbetCloud/models/queries/app/C_getChannels.php?id="+o+"&plaza="+i+"&source="+l[0].Privilege).subscribe(s=>{this.canales=s,console.log(s);let c=s;for(var g=0;g<c.length;g++)for(var u=0;u<t.length;u++)t[u].ChannelID==c[g].ChannelID&&(c[g].selected=!0)})})}loadSpots(){return(0,m.mG)(this,void 0,void 0,function*(){let o=yield this.storage.get("plaza"),a=yield this.storage.get("canal"),i=yield this.storage.get("id"),t=yield this.storage.get("p");t=t[0].p;let l=[],s=[],c=yield this.storage.get("spot"),g=yield this.storage.get("library");g=g[0].Privilege,console.log(t);let d,u=yield this.storage.get("a");console.log(u[0].Spots),"Spots"==g[0].Privilege?d=u[0].Spots:"INE"==g[0].Privilege?d=u[0].INE:"Transmisiones"==g[0].Privilege&&(d=u[0].Transmisiones),null==c&&(c=[]);for(var h=0;h<a.length;h++)s.push(a[h].ChannelID);for(h=0;h<o.length;h++)l.push("'"+o[h].Name+"'"),"INE"==g&&l.push("'National|'");var Z={id:s,p:d,uss:i,library:g,plaza:l};console.log(Z),S.ajax({url:"https://backup.tregional.mx/AbetCloud/models/queries/app/C_getSpots.php",type:"POST",dataType:"Json",data:Z,crossDomain:!0,async:!0,success:v=>{this.spots=v,console.log(v);let C=v;for(var f=0;f<C.length;f++)for(var P=0;P<c.length;P++)c[P].MediaRef==C[f].MediaRef&&(C[f].selected=!0)}})})}selectChanged(o){console.log("CHANGED: ",o)}botonbuscar(){return(0,m.mG)(this,void 0,void 0,function*(){yield this.storage.get("plaza");let a=yield this.storage.get("canal"),i=yield this.storage.get("id"),t=yield this.storage.get("p");t=t[0].p;let l=yield this.storage.get("spot"),s=yield this.storage.get("library"),c="";for(let d=0;d<a.length;d++)c=c+","+a[d].ChannelID;c=c.slice(1);let g="'";for(let d=0;d<l.length;d++)g=g+"','"+l[d].MediaRef;g=g.slice(3)+"'",this.storage.set("link","https://backup.tregional.mx/AbetCloud/models/queries/App/C_getDetections.php?id="+c+"&s="+g+"&p="+t+"&u="+i+"&l="+s[0].Privilege),this.router.navigate(["/inicio"])})}ngOnInit(){return(0,m.mG)(this,void 0,void 0,function*(){yield this.storage.create(),this.storage.remove("plaza"),this.storage.remove("library"),this.storage.remove("canal"),this.storage.remove("spot")})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(N.eN),e.Y36(J.K),e.Y36(y.F0),e.Y36(I.y),e.Y36(p.SH),e.Y36(p.t4))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-home"]],decls:29,vars:9,consts:[[1,"ion-no-border"],["id","btn-menu","slot","start"],[3,"fullscreen"],["shape","round","fill","outline","expand","block","id","btnbuscar","disabled","true",3,"click"],["id","filtroSpot"],[3,"click"],["itemTextField","Privilage",1,"searchable",3,"data4","multiple4","selectChanged"],["select4",""],["id","plaza","disabled","true",3,"click"],["itemTextField","Name",1,"searchable",3,"data","multiple","selectChanged"],["select",""],["id","canal","disabled","true",3,"click"],["itemTextField","Name",1,"searchable",3,"data2","multiple","selectChanged"],["select2",""],["id","spot","disabled","true",3,"click"],["itemTextField","MediaRef",1,"searchable",3,"data3","multiple","selectChanged"],["select3",""]],template:function(o,a){if(1&o){const i=e.EpF();e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA()()(),e.TgZ(4,"ion-content",2),e._UZ(5,"br"),e.TgZ(6,"ion-button",3),e.NdJ("click",function(){return a.botonbuscar()}),e._uU(7,"Buscar"),e.qZA(),e.TgZ(8,"div",4)(9,"ion-item",5),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(13);return e.KtG(l.open4())})("click",function(){return a.loadLibrary()}),e.TgZ(10,"ion-label"),e._uU(11,"Selecciona Source "),e.qZA(),e.TgZ(12,"app-searchable-library",6,7),e.NdJ("selectChanged",function(l){return a.selectChanged(l)}),e.qZA()(),e.TgZ(14,"ion-item",8),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(18);return e.KtG(l.open())})("click",function(){return a.loadLocations()}),e.TgZ(15,"ion-label"),e._uU(16,"Selecciona Plaza"),e.qZA(),e.TgZ(17,"app-searchable-select",9,10),e.NdJ("selectChanged",function(l){return a.selectChanged(l)}),e.qZA()(),e.TgZ(19,"ion-item",11),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(23);return e.KtG(l.open2())})("click",function(){return a.loadCanales()}),e.TgZ(20,"ion-label"),e._uU(21,"Selecciona Canal"),e.qZA(),e.TgZ(22,"app-searchable-canal",12,13),e.NdJ("selectChanged",function(l){return a.selectChanged(l)}),e.qZA()(),e.TgZ(24,"ion-item",14),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(28);return e.KtG(l.open3())})("click",function(){return a.loadSpots()}),e.TgZ(25,"ion-label"),e._uU(26,"Selecciona Libreria"),e.qZA(),e.TgZ(27,"app-searchable-spot",15,16),e.NdJ("selectChanged",function(l){return a.selectChanged(l)}),e.qZA()()()()}2&o&&(e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(8),e.Q6J("data4",a.library)("multiple4",!1),e.xp6(5),e.Q6J("data",a.locations)("multiple",!0),e.xp6(5),e.Q6J("data2",a.canales)("multiple",!0),e.xp6(5),e.Q6J("data3",a.spots)("multiple",!0))},dependencies:[p.YG,p.Sm,p.W2,p.Gu,p.Ie,p.Q$,p.fG,p.sr,T.H,H.C,M.y,k.U],styles:["ion-title[_ngcontent-%COMP%]{text-align:center}ion-toolbar[_ngcontent-%COMP%]{background-color:transparent;--opacity: 5%}ion-content[_ngcontent-%COMP%]{--ion-background-color: white}ion-label[_ngcontent-%COMP%]{font-size:20px}ion-item[_ngcontent-%COMP%]{padding-left:3%;padding-right:3%;padding-top:10%;color:#274662;--border-color: #d75928;--border-style: solid;--border-width: 2px;--border-radius: 20px;font-size:18px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#000}.searchable[_ngcontent-%COMP%]{color:#000}ion-button[_ngcontent-%COMP%]{margin-top:15px;--background: #274662;--background-activated: #ffffff;color:#fff}.bnt-menu[_ngcontent-%COMP%]{background-color:#a9cd19}"]}),n})()}];let D=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[y.Bz.forChild(G),y.Bz]}),n})();var O=r(7576),x=r(8024);let F=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[z.ez,A.u5,p.Pc,D,T.H,H.C,M.y,k.U,O.E,x._]}),n})()}}]);